pico-8 cartridge // http://www.pico-8.com
version 42
__lua__

function _init()
    length = 0
    height = 40
    max_height = 40
    min_height = 20
    max_length = 40
    min_length = 0
    gravity = 0.015
    y_velocity = 0
    animation_table = {17, 32, 48, 34, 50}
    current_anim = 1
    animation_count = 0

    x_position = 0
    x_velocity = 1.5

end

function _update()
    if(btn(2)) then
        length = mid(min_length, length + 1.5, max_length) 
    elseif(btn(3)) then
        length = mid(min_length, length - 1.5, max_length) 
    elseif(btn(1)) then
        height = mid(min_height, height + 1.5, max_height) 
        length = mid(min_length, length + 1.5, max_length) 
    elseif(btn(0)) and length > min_length then
        height = mid(min_height, height - 1.5, max_height) 
        length = mid(min_length, length - 1.5, max_length) 
    end

    height = mid(min_height, height + y_velocity, max_height) 
    if(height != max_height) then
        y_velocity += gravity
    else 
        y_velocity = 0
    end

    x_position -= x_velocity
    if x_position < -64 then 
        x_position = 0
    end
end

function animate_horse()
    animation_count += 1
    if animation_count == 5 then 
        current_anim += 1
        animation_count = 0
    end

    if current_anim > 5 then 
        current_anim = 2
    end

    if height < max_height then 
        current_anim = 2
    end


end

function draw_horse()
    spr(1, 4, height, 2, 1) -- top body
    spr(animation_table[current_anim], 4, height+8, 2, 1) -- bottom body
    for i = 0, length do
        spr(3, 12, height + 8 -i, 1, 1)
        --print(i)
    end
    
    spr(19, 12, height+1-length, 1, 1) -- Head
end

function _draw()
    --poke(0x5f2c, 3) -- 64x64
    animate_horse()
    cls(1)
    draw_horse()
    map(0, 0, x_position, 0, 32, 32)
    
end



__gfx__
00000000000000000000000002444000033303330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000003b3b33b30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000000000000000000000000033bb3bbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000000000000000000000000003bbb3b3b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000b3b333330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000000000000000000000000003b33bb3b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000333b33b30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000224440000000000000000003b333b330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000224444444444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000244444444444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000204444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000200444444440000000024040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000200402000402000000244f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000040200004002000022474ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000004020000400200002444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000004020000400200002444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
22444444444440002244444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
24444444444440002444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
20444444444400002044444444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000024240
20044444444000002004444444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000244f00
204020000042200020040200040200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022474ff
04002000000402000040020004002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002444444
40000200000044000004200040220000000000000000000000000000000000000000000000000000000000000000000000000000000000000224440022444000
00000000000000000000400400000000000000000000000000000000000000000000000000000000000000000000000000000000000000002244444444444000
22444444444440002244444444444000000000000000000000000000000000000000000000000000000000000000000000000000000045002444444444444000
24444444444440002444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000054402444444444444000
20444444444400002044444444440000000000000000000000000000000000000000000000000000000000000000000000000000000544442044444444440000
20044444444000002004444444400000000000000000000000000000000000000000000000000000000000000000000000000000500444442004444444400000
20442200004200002004020004022000000000000000000000000000000000000000000000000000000000000000000000000000544444000004020004020000
04020000004200000000440000400200000000000000000000000000000000000000000000000000000000000000000000000000444444000040200004002000
04002000442000000000204044000200000000000000000000000000000000000000000000000000000000000000000000000000444444000040200004002000
00000000002000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000400404000040200004002000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040404040404040404040404040404040404000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
